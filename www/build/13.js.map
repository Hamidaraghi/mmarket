{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { Login } from './login';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [Login],\r\n  imports: [IonicPageModule.forChild(Login)],\r\n})\r\nexport class LoginPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Storage } from '@ionic/storage';\nimport { Http } from '@angular/http';\nimport { Component } from '@angular/core';\nimport { NavController, NavParams, ToastController, AlertController, Events, IonicPage } from 'ionic-angular';\n\n@IonicPage({})\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class Login {\n  searchQuery: string = '';\n  username: string;\n  password: string;\n  Signup = 'Signup';\n  PasswordresetPage = 'PasswordresetPage';\n\n  constructor(public events: Events, public navCtrl: NavController, public navParams: NavParams, public http: Http, public toastController: ToastController,\n    public storage: Storage, public alertController: AlertController) {\n    this.username = \"\";\n    this.password = \"\";\n\n  }\n\n  passwordReset() {\n\n    let secret = Math.floor(Math.random() * 90000) + 10000;\n\n    /*   var url = \"http://panel.websmspanel.ir/post/send.asmx\";\n      let postData = new FormData();\n      postData.append('from', '50001333885200');\n      postData.append('to', '9117966486');\n      postData.append('text', secret.toString());\n      postData.append('password', 'hamidvahid2012');\n      postData.append('username', 'h_araghi');\n      postData.append('UDH', '');\n      postData.append('IsFlash', 'false');\n      postData.append('recId', '');\n      postData.append('status', '');\n      \n      this.http.post(url, postData).subscribe(res=>{\n        console.log(res);\n      }) */\n\n    this.http.post(\"http://panel.websmspanel.ir/post/sendsms.ashx?from=50001333885200&to=9117966486&text=\" + secret + \"&password=hamidvahid2012&username=h_araghi\", \"SendSms\")\n      .subscribe((res) => {\n        console.log(res);\n\n        if (res.ok) {\n          this.toastController.create({\n            message: \"پیامک حاوی کد تغییر رمز به شماره تلفن همراه شما ارسال شد.\"\n            , duration: 5000\n          }).present();\n          return\n        }\n      });\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LoginPage');\n  }\n  login() {\n    this.http.get(\"https://mmarket.ir/api/auth/generate_auth_cookie/?insecure=cool&username=\" + this.username + \"&password=\" + this.password)\n      .subscribe((res) => {\n        console.log(res.json());\n\n        let response = res.json();\n        \n        if (response.error) {\n\n          let error: string =\"\";\n\n          if (error.indexOf(\"Invalid username\")) {\n            error = \"نام کاربری یا کلمه عبور اشتباه است\"\n          } else {\n            error = response.error;\n          }\n\n          this.toastController.create({\n            message: error\n            , duration: 5000,\n            cssClass: 'rtl'\n          }).present();\n          return\n        }\n        // Bublishing login user\n        this.events.publish('userLoginInfo', true, response)\n        this.storage.set(\"userLoginInfo\", response).then((data) => {\n\n          this.alertController.create({\n            title: \"ورود موفق\",\n            message: \"شما با موفقیت وارد شده اید.\",\n            buttons: [{\n              text: \"خب\",\n              handler: () => {\n                if (this.navParams.get(\"next\")) {\n                  this.navCtrl.push(this.navParams.get(\"next\"));\n\n                } else {\n                  this.navCtrl.popToRoot();\n                }\n              }\n            }],\n            cssClass: 'rtl'\n          }).present();\n\n        }, (err) => console.log(err))\n\n      });\n  }\n  onSearch(event) {\n    if (this.searchQuery.length > 0) {\n      this.navCtrl.push('SearchPage', { \"searchQuery\": this.searchQuery })\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}